# ClusteringMarkers

[![Version](https://img.shields.io/cocoapods/v/ClusteringMarkers.svg?style=flat)](https://cocoapods.org/pods/ClusteringMarkers)
[![License](https://img.shields.io/cocoapods/l/ClusteringMarkers.svg?style=flat)](https://cocoapods.org/pods/ClusteringMarkers)
[![Platform](https://img.shields.io/cocoapods/p/ClusteringMarkers.svg?style=flat)](https://cocoapods.org/pods/ClusteringMarkers)

![Screen Shot](https://user-images.githubusercontent.com/26859529/58710738-70c96e80-83d6-11e9-9d1a-bd5becf66cc8.png)

## Usage

The main class used is Pin inherited from Marker. Pin contains object displayed on the map. You can put any class that conforms to the ```IPinObject``` protocol.

### Clustering with data adapter:
```swift
    var stores: [Store] = [Store(), Store()]
        
    var mapDataAdapter = CMDataAdapter(mapView: mapView, delegate: self)
    //delegate â€” loading and tap markers notifications
        
    mapDataAdapter.setMarkers(with: stores, withMoveToBounds: true)
```
## Customization:

Pins provides you to customize them using class inheritance.
Use ```setCachedImage``` to cache repeated images for reuse.

### Pin:
```swift
    override public func setIcon() {
        if let icon = IsSelected ? #your_selected_image : #your_image {
            Placemark?.setIconWith(icon)
        }
    }
```
### Cluster:
Use ```styleCluster``` to customize the cluster generated by YandexMapsMobile.

### Setup customization:
Inherit class ```CMDataAdapter```.

```swift
    override func initiatePin(object: IPinObject) -> Pin? {
        return Pin(object)
    }

    override func styleCluster(with cluster: Cluster, imageCache: AutoPurgingImageCache?) {
        cluster.setCachedImage(withIdentifier: "\(cluster.size)", imageCache: imageCache) { () -> UIImage? in
            return ClusterView(number: cluster.size, displayedText: "\(cluster.size)").snapshot()
        }
    }
```

## Example

To run the example project, clone the repo, and run `pod install` from the Example directory first.
To enable the Yandex Map you should get API key from [website](https://tech.yandex.ru/maps/mapkit/) and put it in AppDelegate.swift

## Installation

ClusteringMarkers is available through [CocoaPods](https://cocoapods.org). To install
it, simply add the following line to your Podfile:

```ruby
pod 'ClusteringMarkers'
```

## Author

Aleksandr, Alex11Sm@mail.ru

## License

ClusteringMarkers is available under the MIT license. See the LICENSE file for more info.
